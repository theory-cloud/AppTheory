{
  "id": "p1.error.portable_fields",
  "tier": "p1",
  "name": "Portable error envelope fields",
  "setup": {
    "routes": [
      { "method": "GET", "path": "/portable-error", "handler": "portable_error" }
    ]
  },
  "input": {
    "request": {
      "method": "GET",
      "path": "/portable-error",
      "query": {},
      "headers": { "x-request-id": ["req_123"] },
      "body": { "encoding": "utf8", "value": "" },
      "is_base64": false
    }
  },
  "expect": {
    "response": {
      "status": 409,
      "headers": {
        "content-type": ["application/json; charset=utf-8"],
        "x-request-id": ["req_123"]
      },
      "cookies": [],
      "body_json": {
        "error": {
          "code": "app.conflict",
          "message": "conflict",
          "status_code": 409,
          "details": {
            "field": "email",
            "retryable": false
          },
          "request_id": "req_123",
          "trace_id": "trace_456",
          "timestamp": "2024-01-02T03:04:05Z",
          "stack_trace": "stack:line"
        }
      },
      "is_base64": false
    }
  }
}
