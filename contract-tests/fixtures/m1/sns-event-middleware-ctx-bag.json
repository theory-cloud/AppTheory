{
  "id": "m1.sns.event_middleware.ctx_bag",
  "tier": "m1",
  "name": "SNS: event middleware + ctx.Set/Get",
  "setup": {
    "middlewares": ["evt_mw_a", "evt_mw_b"],
    "sns": [{ "topic": "topic-a", "handler": "sns_echo_event_middleware" }]
  },
  "input": {
    "aws_event": {
      "source": "sns",
      "event": {
        "Records": [
          {
            "EventSource": "aws:sns",
            "EventVersion": "1.0",
            "EventSubscriptionArn": "",
            "Sns": {
              "MessageId": "sns-1",
              "TopicArn": "arn:aws:sns:us-east-1:000000000000:topic-a",
              "Subject": "subject",
              "Message": "hello",
              "Timestamp": "1970-01-01T00:00:00Z"
            }
          }
        ]
      }
    }
  },
  "expect": {
    "output_json": [{ "mw": "ok", "trace": ["evt_mw_a", "evt_mw_b"] }]
  }
}

