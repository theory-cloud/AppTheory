{
  "id": "m1.kinesis.unrecognized_stream_fails_closed",
  "tier": "m1",
  "name": "Kinesis: unrecognized stream fails closed (all records returned as failures)",
  "setup": {
    "kinesis": [
      { "stream": "stream-a", "handler": "kinesis_noop" }
    ]
  },
  "input": {
    "aws_event": {
      "source": "kinesis",
      "event": {
        "Records": [
          {
            "eventID": "kin-1",
            "eventName": "aws:kinesis:record",
            "eventSource": "aws:kinesis",
            "eventSourceARN": "arn:aws:kinesis:us-east-1:000000000000:stream/stream-missing",
            "eventVersion": "1.0",
            "awsRegion": "us-east-1",
            "kinesis": {
              "partitionKey": "pk-1",
              "sequenceNumber": "1",
              "kinesisSchemaVersion": "1.0",
              "data": "b2s="
            }
          },
          {
            "eventID": "kin-2",
            "eventName": "aws:kinesis:record",
            "eventSource": "aws:kinesis",
            "eventSourceARN": "arn:aws:kinesis:us-east-1:000000000000:stream/stream-missing",
            "eventVersion": "1.0",
            "awsRegion": "us-east-1",
            "kinesis": {
              "partitionKey": "pk-2",
              "sequenceNumber": "2",
              "kinesisSchemaVersion": "1.0",
              "data": "b2s="
            }
          }
        ]
      }
    }
  },
  "expect": {
    "output_json": {
      "batchItemFailures": [
        { "itemIdentifier": "kin-1" },
        { "itemIdentifier": "kin-2" }
      ]
    }
  }
}

