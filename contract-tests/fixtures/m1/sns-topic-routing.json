{
  "id": "m1.sns.topic_routing",
  "tier": "m1",
  "name": "SNS: route by topic name extracted from TopicArn",
  "setup": {
    "sns": [
      { "topic": "topic-a", "handler": "sns_static_a" },
      { "topic": "topic-b", "handler": "sns_static_b" }
    ]
  },
  "input": {
    "aws_event": {
      "source": "sns",
      "event": {
        "Records": [
          {
            "EventSource": "aws:sns",
            "EventVersion": "1.0",
            "EventSubscriptionArn": "",
            "Sns": {
              "MessageId": "sns-1",
              "TopicArn": "arn:aws:sns:us-east-1:000000000000:topic-b",
              "Subject": "subject",
              "Message": "hello",
              "Timestamp": "1970-01-01T00:00:00Z"
            }
          }
        ]
      }
    }
  },
  "expect": { "output_json": [{ "handler": "b" }] }
}

