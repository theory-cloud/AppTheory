{
  "id": "m2.websocket.connect_routing",
  "tier": "m2",
  "name": "WebSocket: route $connect + extract context fields",
  "setup": {
    "websockets": [{ "route_key": "$connect", "handler": "ws_connect_ok" }]
  },
  "input": {
    "aws_event": {
      "source": "apigw_websocket",
      "event": {
        "path": "/",
        "httpMethod": "GET",
        "headers": {},
        "queryStringParameters": {},
        "requestContext": {
          "stage": "dev",
          "requestId": "ws-req-1",
          "connectionId": "conn-1",
          "domainName": "example.execute-api.us-east-1.amazonaws.com",
          "eventType": "CONNECT",
          "routeKey": "$connect"
        },
        "body": "",
        "isBase64Encoded": false
      }
    }
  },
  "expect": {
    "response": {
      "status": 200,
      "headers": { "content-type": ["application/json; charset=utf-8"] },
      "cookies": [],
      "body_json": {
        "handler": "connect",
        "route_key": "$connect",
        "event_type": "CONNECT",
        "connection_id": "conn-1",
        "management_endpoint": "https://example.execute-api.us-east-1.amazonaws.com/dev",
        "request_id": "ws-req-1"
      },
      "is_base64": false
    }
  }
}

